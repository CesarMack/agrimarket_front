<div class="flex flex-wrap">
  <div class="relative w-full flex flex-col min-w-0 break-words bg-white rounded mb-6 xl:mb-0 shadow-lg pt-5">
    <form [formGroup]="productForm" (ngSubmit)="newProduct()" class="grid grid-cols-2 gap-5">
      <div class="bg-white shadow-md rounded px-8 pb-3 mb-4 flex flex-col my-2">
        <h2 class="text-xl font-semibold">
          Detalles del producto
        </h2>
        <hr class="w-full h-1 mx-auto my-3 bg-gray-300 border-0 rounded" />
        <div class="-mx-3 md:flex mb-6 mt-5">
          <div class="md:w-1/2 px-3 mb-6 md:mb-0">
            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="grid-first-name">
              Producto
            </label>
            <div class="relative">
              <select formControlName="name" [(ngModel)]="selectedProductName" class="block appearance-none w-full bg-grey-lighter border border-grey-lighter text-grey-darker py-3 px-4 pr-8 rounded" id="grid-state">
                <option *ngFor="let item of productsType?.data" [value]="item.name" [attr.data-id-category]="item.id">
                  {{ item.name }}
                </option>
              </select>
              <div class="pointer-events-none absolute top-0 bottom-0 right-0 mr-2 pin-y pin-r flex items-center px-2 text-grey-darker">
                <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
              </div>
            </div>
          </div>
      
      
          <div class="md:w-1/2 px-3">
            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="grid-last-name">
              Unidad de medida
            </label>
            <div class="relative">
              <select formControlName="units" class="block appearance-none w-full bg-grey-lighter border border-grey-lighter text-grey-darker py-3 px-4 pr-8 rounded" id="grid-state">
                <option *ngFor="let item of units?.data" [value]="item.name" [attr.data-id-category]="item.id">
                  {{ item.name }}
                </option>
              </select>
              <div class="pointer-events-none absolute top-0 bottom-0 right-0 mr-2 pin-y pin-r flex items-center px-2 text-grey-darker">
                <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
              </div> 
            </div>
          </div>
        </div>
      
        <div class="-mx-3 md:flex mb-6">
          <div class="md:w-1/2 px-3">
            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="grid-last-name">
              Fecha de cosecha
            </label>
            <mat-form-field class="w-full">
              <input matInput [matDatepicker]="picker" formControlName="date" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5" placeholder="MM/DD/YYYY"/>
              <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>  
          </div>
      
          <div class="md:w-1/2 px-3 mb-6 md:mb-0">
            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="grid-city">
              Mínimo de venta
            </label>
            <input formControlName="minimumSale" type="number" class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4" id="grid-zip" placeholder="0"  min="1">
          </div>
        </div>
      
        <div class="-mx-3 md:flex mb-6">
          <div class="md:w-1/2 px-3">
            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="grid-state">
              Existencias disponibles
            </label>
            <input formControlName="stock" class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4" id="grid-zip" type="number" placeholder="0"  min="1">
          </div>
            
          <div class="md:w-1/2 px-3">
            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="grid-zip">
              Precio
            </label>
            <input formControlName="price" class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4" id="grid-zip" type="number" placeholder="0"  min="1">
          </div>
        </div>
      
        <div class="-mx-3 md:flex mb-6">
          <div class="w-full px-3 mb-6 md:mb-0">
            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="grid-city">
              Descripción del producto
            </label>
            <textarea formControlName="description" type="text" class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4" id="grid-zip" placeholder="Ingresa una breve descripción de tu producto"  min="1"></textarea>
          </div>
        </div>
      </div>
      <div class="bg-white shadow-md rounded px-8 pb-8 mb-4 flex flex-col my-2">
        <h2 class="text-xl font-semibold">
          Fotos
        </h2>
        <hr class="w-full h-1 mx-auto my-3 bg-gray-300 border-0 rounded" />
        
        <div class="px-3 mb-6 md:mb-0 w-full flex items-center h-auto justify-center">    
          <div x-data="{photoName: null, photoPreview: null}" class="col-span-6 ml-2 sm:col-span-4 md:mr-3">
            <!-- Photo File Input -->
            <input type="file" class="hidden" x-ref="photo" x-on:change="
                                photoName = $refs.photo.files[0].name;
                                const reader = new FileReader();
                                reader.onload = (e) => {
                                    photoPreview = e.target.result;
                                };
                                reader.readAsDataURL($refs.photo.files[0]);
            " multiple (change)="onFileSelected($event)">
            
            <div class="flex flex-col items-center text-center w-full">
                <!-- New Profile Photo Preview -->
                <div class="grid grid-rows-3 relative mx-auto w-[100px] h-[100px]" *ngFor="let image of selectedImages; let i = index">
                  <img class="absolute block rounded-lg m-auto shadow" *ngIf="image.previewUrl" [src]="image.previewUrl" alt="Vista previa"/>
                  <button class="absolute inset-y-0 inset-x-0" (click)="removeImage(i, image.id!)">
                    Eliminar
                  </button>
                </div>
                <button type="button" class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-400 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150 mt-2 ml-3" x-on:click.prevent="$refs.photo.click()">
                    Seleccionar fotos
                </button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>